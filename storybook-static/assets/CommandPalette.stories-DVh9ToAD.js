import{j as d}from"./jsx-runtime-BO8uF4Og.js";import{r as u}from"./index-D4H_InIO.js";import{userEvent as k}from"./index-DajN9u-m.js";function D(a,n){const s=a.toLowerCase(),l=n.toLowerCase();if(!s)return{item:n,score:0,matches:!0};let c=0,r=0,i=0;for(let o=0;o<l.length;o++)if(l[o]===s[c]){if(r+=10+5*i,i++,c++,c===s.length)return{item:n,score:r-(l.length-s.length),matches:!0}}else i=0,r-=1;return{item:n,score:0,matches:!1}}function C(a,n){u.useEffect(()=>{if(!n)return;const s=l=>{if(l.key!=="Tab")return;const c=a.current;if(!c)return;const r=c.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(r.length===0)return;const i=r[0],o=r[r.length-1];l.shiftKey?document.activeElement===i&&(l.preventDefault(),o.focus()):document.activeElement===o&&(l.preventDefault(),i.focus())};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[n,a])}const N=[{id:"1",label:"Toggle Dark Mode",action:()=>alert("Dark Mode Toggled")},{id:"2",label:"Go to Settings",action:()=>alert("Navigating to Settings...")},{id:"3",label:"Create New File",action:()=>alert("New File Created")},{id:"4",label:"Git Checkout",action:()=>alert("Git checkout triggered")}],E=()=>{const[a,n]=u.useState(!1),[s,l]=u.useState(""),[c,r]=u.useState(0),i=u.useRef(null);u.useEffect(()=>{const e=t=>{(t.metaKey||t.ctrlKey)&&t.key==="k"&&(t.preventDefault(),n(m=>!m),l(""),r(0)),t.key==="Escape"&&n(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);const o=u.useMemo(()=>N.map(e=>({...e,result:D(s,e.label)})).filter(e=>e.result.matches).sort((e,t)=>t.result.score-e.result.score),[s]);return C(i,a),u.useEffect(()=>{const e=t=>{var m;a&&(t.key==="ArrowDown"?(t.preventDefault(),r(h=>(h+1)%o.length)):t.key==="ArrowUp"?(t.preventDefault(),r(h=>(h-1+o.length)%o.length)):t.key==="Enter"&&(t.preventDefault(),(m=o[c])==null||m.action(),n(!1)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,o,c]),a?d.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh] bg-black/60 backdrop-blur-sm",children:d.jsxs("div",{ref:i,role:"dialog","aria-modal":"true",className:"w-full max-w-xl flex flex-col overflow-hidden rounded-xl border border-zinc-800 bg-zinc-900 shadow-2xl",children:[d.jsx("input",{autoFocus:!0,type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Type a command...",className:"h-14 flex-1 bg-transparent px-4 text-lg text-white placeholder-zinc-500 focus:outline-none border-b border-zinc-800"}),d.jsx("ul",{className:"max-h-[60vh] overflow-y-auto p-2",role:"listbox",children:o.length===0?d.jsx("div",{className:"p-4 text-center text-sm text-zinc-500",children:"No results found."}):o.map((e,t)=>d.jsx("li",{role:"option","aria-selected":t===c,tabIndex:0,onClick:()=>{e.action(),n(!1)},onMouseEnter:()=>r(t),onFocus:()=>r(t),onKeyDown:m=>{m.key==="Enter"&&(e.action(),n(!1))},className:`flex cursor-pointer items-center justify-between rounded-md px-4 py-3 outline-none ${t===c?"bg-zinc-800 text-white ring-1 ring-zinc-700":"text-zinc-400 hover:bg-zinc-800/50"}`,children:d.jsx("span",{children:e.label})},e.id))})]})}):null};E.__docgenInfo={description:"",methods:[],displayName:"CommandPalette"};const L={title:"Components/CommandPalette",component:E,parameters:{layout:"fullscreen",backgrounds:{default:"dark"}}},f={},p={play:async({canvasElement:a})=>{const n=a.ownerDocument.body;await new Promise(s=>setTimeout(s,500)),await k.type(n,"{control}k")}};var y,w,g;f.parameters={...f.parameters,docs:{...(y=f.parameters)==null?void 0:y.docs,source:{originalSource:"{}",...(g=(w=f.parameters)==null?void 0:w.docs)==null?void 0:g.source}}};var v,x,b;p.parameters={...p.parameters,docs:{...(v=p.parameters)==null?void 0:v.docs,source:{originalSource:`{
  play: async ({
    canvasElement
  }: {
    canvasElement: HTMLElement;
  }) => {
    const body = canvasElement.ownerDocument.body;
    await new Promise(r => setTimeout(r, 500));
    await userEvent.type(body, '{control}k');
  }
}`,...(b=(x=p.parameters)==null?void 0:x.docs)==null?void 0:b.source}}};const M=["Default","Opened"];export{f as Default,p as Opened,M as __namedExportsOrder,L as default};
